---
import { getEntry, render } from "astro:content";
import Twikoo from "@components/comment/Twikoo.astro";
import Markdown from "@components/misc/Markdown.astro";
import { commentConfig } from "@/config";
import I18nKey from "../i18n/i18nKey";
import { i18n } from "../i18n/translation";
import MainGridLayout from "../layouts/MainGridLayout.astro";

const feedbackPost = await getEntry("spec", "feedback");

if (!feedbackPost) {
	throw new Error("Feedback page content not found");
}

const { Content } = await render(feedbackPost);
const title = i18n(I18nKey.feedback);

// Â∞Ü‰∏ãÈù¢ÁöÑÂ∏∏ÈáèÁßªÂà∞‰∏äÈù¢ËøôÈáå
const path = Astro.url.pathname;

let commentService = "";
if (commentConfig?.enable && commentConfig?.twikoo) {
	commentService = "twikoo";
}
---

<MainGridLayout title={title}>
	<!-- ÂºïÂÖ•Âè≥‰æßËæπÊ†èÂ∏ÉÂ±ÄÁÆ°ÁêÜÂô® -->
  <script>
    import('../scripts/right-sidebar-layout.js');
  </script>
    <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
        <div class="card-base z-10 px-9 py-6 relative w-full">
            <!-- È°µÈù¢Ê†áÈ¢ò -->
            <div class="flex flex-col items-start justify-center mb-8">
                <h1 class="text-4xl font-bold text-black/90 dark:text-white/90 mb-2 relative
                          before:w-1 before:h-8 before:rounded-md before:bg-[var(--primary)]
                          before:absolute before:top-1/2 before:-translate-y-1/2 before:-left-4">
                    {title}
                </h1>
            </div>

            <!-- ‰ªéMDÊñá‰ª∂ËØªÂèñÁöÑÂÜÖÂÆπ -->
            <Markdown class="mt-2">
                <Content />
            </Markdown>

        </div>
    </div>

</br>

    <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
        <div class="card-base z-10 px-9 py-6 relative w-full">
            <!-- È°µÈù¢Ê†áÈ¢ò -->
            <div class="flex flex-col items-start justify-center mb-8">
                <h1 class="text-3xl font-bold text-black/90 dark:text-white/90 mb-2 relative
                          before:w-1 before:h-8 before:rounded-md before:bg-[var(--primary)]
                          before:absolute before:top-1/2 before:-translate-y-1/2 before:-left-4">
                    {i18n(I18nKey.contactMe)}
                </h1>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-5 gap-y-5">
                    <div class="bg-[oklch(0.95_0.015_var(--hue))] dark:bg-[oklch(0.33_0.035_var(--hue))] rounded-xl p-8 shadow-sm hover:shadow-lg dark:hover:shadow-lg dark:hover:shadow-white/30 transition-shadow">
                        <p class="text-4xl m-0 mb-4 text-left">üìß</p>
                        <p class="text-md font-normal text-black/100 dark:text-white/80">
                            {i18n(I18nKey.contactEmail)}
                        </p>
                        <!-- Ê≠§Â§Ñ‰øÆÊîπÊÇ®ÁöÑÈÇÆÁÆ±Âú∞ÂùÄ -->
                        <a class="transition link text-[var(--primary)] hover:text-gray-600 dark:hover:text-white/80 font-medium" target="_blank" href="https://mail.google.com/">zuoxiju233@gmail.com</a>
                    </br>  
                        <a class="transition link text-[var(--primary)] hover:text-gray-600 dark:hover:text-white/80 font-medium" target="_blank" href="https://mail.qq.com/">2417112964@qq.com</a>
                    </div>

                    <div class="bg-[oklch(0.95_0.015_var(--hue))] dark:bg-[oklch(0.33_0.035_var(--hue))] rounded-xl p-8 shadow-sm hover:shadow-lg dark:hover:shadow-lg dark:hover:shadow-white/30 transition-shadow">
                    <p class="text-4xl m-0 mb-4 text-left">üí¨</p>
                    <p class="text-md font-normal text-black/100 dark:text-white/80">
                        {i18n(I18nKey.contactSocialFriends)}
                    </p>
                        <a class="btn-regular bg-[oklch(0.7_0.12_var(--hue))] text-white/80 hover:text-[var(--primary)] h-10 text-sm px-3 rounded-lg mt-2.5" href="/albums/contact/">{i18n(I18nKey.addFriends)}</a>
                    </div>
            </div>
        </div>
    </div>

</br>

    {commentConfig?.enable && (
        <div class="card-base p-6 mb-4">
            {commentService === 'twikoo' && <Twikoo path={path} />}
            {commentService === '' && null}
        </div>
    )}
</MainGridLayout>
